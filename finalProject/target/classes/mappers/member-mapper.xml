<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">

    <resultMap type="Member" id="memberResultSet">
        <result column="MEMBER_NO" property="memberNo"/>
        <result column="MEMBER_NICK" property="memberNick"/>
        <result column="MEMBER_ID" property="memberId"/>
        <result column="MEMBER_PWD" property="memberPwd"/>
        <result column="GENDER" property="gender"/>
        <result column="BIRTH_DATE" property="birthDate"/>
        <result column="ENROLL_DATE" property="enrollDate"/>
        <result column="MODIFY_DATE" property="modifyDate"/>
        <result column="STATUS" property="status"/>
        <result column="IS_ADMIN" property="isAdmin"/>
    </resultMap>

    <select id="loginMember" resultMap="memberResultSet">
      SELECT MEMBER_NO,
             MEMBER_NICK,
             MEMBER_ID,
             MEMBER_PWD,
             GENDER,
             BIRTH_DATE,
             ENROLL_DATE,
             MODIFY_DATE,
             STATUS,
             IS_ADMIN
        FROM MEMBER
       WHERE MEMBER_ID = #{memberId}
         AND STATUS = 'Y'
    </select>

    <insert id="insertMember" parameterType="Member">
        INSERT INTO MEMBER(
                           MEMBER_NO,
                           MEMBER_NICK,
                           MEMBER_ID,
                           MEMBER_PWD,
                           GENDER,
                           BIRTH_DATE,
                           ENROLL_DATE,
                           MODIFY_DATE,
                           STATUS,
                           IS_ADMIN)
        VALUES(
                member_seq.NEXTVAL,
                #{memberNick},
                #{memberId},
                #{memberPwd},
                #{gender},
                #{birthDate},
                SYSDATE,
                SYSDATE,
                #{status},
                #{isAdmin}
               )
    </insert>

    <update id="updateMember" parameterType="Member">
        UPDATE MEMBER
           SET MEMBER_NICK = #{memberNick},
               MEMBER_PWD = #{memberPwd},
               GENDER = #{gender},
               BIRTH_DATE = #{birthDate},
               MODIFY_DATE = SYSDATE,
               STATUS = #{status},
               IS_ADMIN = #{isAdmin}
         WHERE MEMBER_ID = #{memberId}
           AND STATUS = 'Y'
    </update>

    <delete id="deleteMember" parameterType="String">
        DELETE FROM MEMBER
         WHERE MEMBER_ID = #{memberId}
           AND STATUS = 'Y'
    </delete>
</mapper>